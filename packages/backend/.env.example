# Backend API Server Configuration

# =============================================================================
# サーバー設定
# =============================================================================
PORT=3000
NODE_ENV=development

# =============================================================================
# CORS設定
# =============================================================================
# 許可するオリジン（カンマ区切り、* で全て許可）
CORS_ALLOWED_ORIGINS=*
# 本番環境の場合の例:
# CORS_ALLOWED_ORIGINS=https://your-frontend-domain.com,https://admin.your-domain.com

# =============================================================================
# JWT / JWKS 設定（本番環境用）
# =============================================================================

# 方法1: Cognito User Pool を使用する場合
COGNITO_USER_POOL_ID=ap-northeast-1_xxxxxxxxx
COGNITO_REGION=ap-northeast-1

# 方法2: 直接JWKSエンドポイントを指定する場合
# JWKS_URI=https://cognito-idp.ap-northeast-1.amazonaws.com/ap-northeast-1_xxxxxxxxx/.well-known/jwks.json

# JWT設定（オプション）
# JWT_ISSUER=https://cognito-idp.ap-northeast-1.amazonaws.com/ap-northeast-1_xxxxxxxxx
# JWT_AUDIENCE=your-app-client-id

# =============================================================================
# 開発環境設定
# =============================================================================
# 開発環境では上記のJWT設定が未設定の場合、JWTの署名検証をスキップして
# デコードのみを行います（セキュリティ上、本番環境では必ず設定してください）

# =============================================================================
# AgentCore Memory 設定
# =============================================================================
AGENTCORE_MEMORY_ID=your-memory-id
AGENTCORE_GATEWAY_ENDPOINT=https://your-gateway-id.gateway.bedrock-agentcore.us-east-1.amazonaws.com/mcp

# =============================================================================
# User Storage 設定
# =============================================================================
# CDKでデプロイ後に取得できるS3バケット名
USER_STORAGE_BUCKET_NAME=your-bucket-name-user-storage-account-region

# =============================================================================
# AWS 設定
# =============================================================================
# AWS リージョン（Lambda環境では自動設定されますが、ローカル開発では明示的に指定）
AWS_REGION=ap-northeast-1

# =============================================================================
# Agents Table 設定
# =============================================================================
# CDKでデプロイ後に取得できるDynamoDBテーブル名
# 例: AgentCoreAppDev-AgentsTableName
AGENTS_TABLE_NAME=your-agents-table-name

# =============================================================================
# Sessions Table 設定
# =============================================================================
# CDKでデプロイ後に取得できるDynamoDBテーブル名
SESSIONS_TABLE_NAME=your-sessions-table-name

# =============================================================================
# Event-Driven Triggers 設定（トリガー機能を使用する場合）
# =============================================================================
# Triggers DynamoDB テーブル名
TRIGGERS_TABLE_NAME=your-triggers-table-name

# Trigger Lambda ARN（EventBridge Schedulerが呼び出すLambda）
TRIGGER_LAMBDA_ARN=arn:aws:lambda:ap-northeast-1:123456789012:function:your-trigger-lambda

# EventBridge Scheduler用のIAMロールARN
SCHEDULER_ROLE_ARN=arn:aws:iam::123456789012:role/your-scheduler-role

# EventBridge Schedulerのグループ名（省略時は 'default'）
SCHEDULE_GROUP_NAME=default

# =============================================================================
# 使用例
# =============================================================================
# 1. ローカル開発（JWT検証なし）:
#    - 上記のJWT設定をコメントアウトした状態で起動
#    - JWTはデコードのみ実行（検証なし）
#
# 2. ローカル開発（JWT検証あり）:
#    - COGNITO_USER_POOL_ID と COGNITO_REGION を設定
#    - 実際のCognito User Pool に対して検証を実行
#
# 3. 本番環境:
#    - すべての設定を適切に設定
#    - NODE_ENV=production に設定
